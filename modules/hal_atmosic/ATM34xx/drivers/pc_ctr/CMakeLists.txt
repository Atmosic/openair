# Copyright (c) 2024-2025 Atmosic
#
# SPDX-License-Identifier: Apache-2.0

if(CONFIG_ATM_PC_CTR)
  zephyr_include_directories(.)
  zephyr_sources(pc_ctr.c)
  zephyr_compile_definitions_ifdef(CONFIG_BT_BUF_ACL_TX_COUNT
    BLE_NUM_TXBUF=CONFIG_BT_BUF_ACL_TX_COUNT
  )
  zephyr_compile_definitions_ifdef(CONFIG_BT_ISO_TX_BUF_COUNT
    BLE_NUM_ISO_TXBUF=CONFIG_BT_ISO_TX_BUF_COUNT
  )
  zephyr_compile_definitions_ifdef(CONFIG_ATM_MAX_ADV_DATA_LEN
    BLE_ADV_DATA_LEN_MAX=CONFIG_ATM_MAX_ADV_DATA_LEN
  )
  zephyr_compile_definitions_ifdef(CONFIG_ATM_MAX_SCAN_DATA_LEN
    BLE_ADV_DATA_SCAN_LEN_MAX=CONFIG_ATM_MAX_SCAN_DATA_LEN
  )
  zephyr_compile_definitions_ifdef(CONFIG_ATM_CLKPPM
    CFG_CLKPPM_OVERRIDE=CONFIG_ATM_CLKPPM
  )
  zephyr_compile_definitions_ifdef(CONFIG_ATM_MAX_ADV_SET
    BLE_MAX_ADV_SET=CONFIG_ATM_MAX_ADV_SET
  )
  zephyr_compile_definitions_ifdef(CONFIG_ATM_PC_HIGH_THD
    PC_HIGH_THD=CONFIG_ATM_PC_HIGH_THD
  )
  zephyr_compile_definitions_ifdef(CONFIG_ATM_PC_LOW_THD
    PC_LOW_THD=CONFIG_ATM_PC_LOW_THD
  )
  zephyr_compile_definitions_ifdef(CONFIG_ATM_LL_HEAP_SIZE
    LL_HEAP_SIZE_OVERRIDE=CONFIG_ATM_LL_HEAP_SIZE
  )
  zephyr_compile_definitions_ifdef(CONFIG_ATM_ENA_DBG_PC_CTR_MEM_USAGE
    DBG_PC_CTR_MEM_USAGE
  )
  zephyr_compile_definitions_ifdef(CONFIG_ATM_PC_FSU_ACL_IFS_MIN
    PC_FSU_ACL_IFS_MIN=CONFIG_ATM_PC_FSU_ACL_IFS_MIN
  )
  zephyr_compile_definitions_ifdef(CONFIG_ATM_PC_FSU_CIS_IFS_MIN
    PC_FSU_CIS_IFS_MIN=CONFIG_ATM_PC_FSU_CIS_IFS_MIN
  )
  zephyr_compile_definitions_ifdef(CONFIG_ATM_ENA_BLE_CS_MANDATORY_TIMING_ONLY
    BLE_CS_MANDATORY_TIMING_ONLY
  )
  zephyr_compile_definitions_ifndef(CONFIG_ATM_ENA_SCAN_RANDOM_BACKOFF
    DIS_SCAN_RANDOM_BACKOFF
  )
endif ()
