sample:
  description: Google Find My Device Network Tag
  name: Google Find My Device Network Tag
common:
  sysbuild: true
  harness: console
  harness_config:
    type: one_line
    regex:
      - "Press button to start pairing"
tests:
  applications.fp_tag.atm:
    tags: fp_tag atm33 atm34 no_mcuboot
    extra_args:
      - SB_CONFIG_SPE=y
  applications.fp_tag.atm.mcuboot:
    tags: fp_tag atm33 atm34 mcuboot
    extra_args:
      - SB_CONFIG_SPE=y
      - SB_CONFIG_BOOTLOADER_MCUBOOT=y
      - SB_CONFIG_BOOT_SIGNATURE_TYPE_ECDSA_P256=y
      - SB_CONFIG_MCUBOOT_MODE_SWAP_SCRATCH=y
      - SB_ATM_DTS_EXTRA_CPPFLAGS="-DDFU_IN_FLASH"
  applications.fp_tag.atm.mcuboot.ota:
    tags: fp_tag atm33 atm34 mcuboot
    extra_args:
      - SB_CONFIG_SPE=y
      - SB_CONFIG_BOOTLOADER_MCUBOOT=y
      - SB_CONFIG_BOOT_SIGNATURE_TYPE_ECDSA_P256=y
      - SB_CONFIG_MCUBOOT_MODE_SWAP_SCRATCH=y
      - SB_ATM_DTS_EXTRA_CPPFLAGS="-DDFU_IN_FLASH"
      - EXTRA_CONF_FILE="basic_ota_bt.conf"
  applications.fp_tag.atm.atmwstk.full:
    tags: fp_tag atm33 no_mcuboot
    extra_args:
      - SB_CONFIG_SPE=y
      - SB_ATM_DTS_EXTRA_CPPFLAGS="-DDFU_IN_FLASH"
      - SB_CONFIG_ATMWSTK_FULL=y
    extra_configs:
      - CONFIG_ATM_SOC_ALLOW="ATM33"
  applications.fp_tag.atm.mcuboot.atmwstk.full:
    tags: fp_tag atm33 mcuboot
    extra_args:
      - SB_CONFIG_SPE=y
      - SB_CONFIG_BOOTLOADER_MCUBOOT=y
      - SB_CONFIG_BOOT_SIGNATURE_TYPE_ECDSA_P256=y
      - SB_CONFIG_MCUBOOT_MODE_SWAP_SCRATCH=y
      - SB_CONFIG_ATMWSTK_FULL=y
      - SB_ATM_DTS_EXTRA_CPPFLAGS="-DDFU_IN_FLASH"
    extra_configs:
      - CONFIG_ATM_SOC_ALLOW="ATM33"
  applications.fp_tag.atm.atmwstk.cpd200:
    tags: fp_tag atm34 no_mcuboot
    extra_args:
      - SB_CONFIG_SPE=y
      - SB_CONFIG_ATMWSTK_CPD200=y
    extra_configs:
      - CONFIG_ATM_SOC_ALLOW="ATM34"
  applications.fp_tag.atm.mcuboot.atmwstk.cpd200:
    tags: fp_tag atm34 mcuboot
    extra_args:
      - SB_CONFIG_SPE=y
      - SB_CONFIG_BOOTLOADER_MCUBOOT=y
      - SB_CONFIG_BOOT_SIGNATURE_TYPE_ECDSA_P256=y
      - SB_CONFIG_MCUBOOT_MODE_SWAP_SCRATCH=y
      - SB_CONFIG_ATMWSTK_CPD200=y
    extra_configs:
      - CONFIG_ATM_SOC_ALLOW="ATM34"
  applications.fp_tag.atm.atmwstk.full.validator:
    tags: fp_tag atm33 no_mcuboot
    extra_args:
      - SB_CONFIG_SPE=y
      - SB_CONFIG_ATMWSTK_FULL=y
      - SB_ATM_DTS_EXTRA_CPPFLAGS="-DDFU_IN_FLASH"
    extra_configs:
      - CONFIG_FP_FMDN_VALIDATOR_TEST=y
      - CONFIG_BT_MAX_CONN=4
      - CONFIG_BT_EXT_ADV_MAX_ADV_SET=3
      - CONFIG_ATM_SOC_ALLOW="ATM33"
  applications.fp_tag.atm.atmwstk.cpd200.validator:
    tags: fp_tag atm34 no_mcuboot
    extra_args:
      - SB_CONFIG_SPE=y
      - SB_CONFIG_ATMWSTK_CPD200=y
    extra_configs:
      - CONFIG_FP_FMDN_VALIDATOR_TEST=y
      - CONFIG_BT_MAX_CONN=4
      - CONFIG_BT_EXT_ADV_MAX_ADV_SET=3
      - CONFIG_ATM_SOC_ALLOW="ATM34"
  applications.fp_tag.atm.mcuboot.serialdfu:
    tags: fp_tag atm33 atm34 no_mcuboot
    extra_args:
      - SB_CONFIG_SPE=y
      - SB_CONFIG_BOOTLOADER_MCUBOOT=y
      - SB_CONFIG_BOOT_SIGNATURE_TYPE_ECDSA_P256=y
      - SB_CONFIG_MCUBOOT_MODE_SWAP_SCRATCH=y
      - EXTRA_CONF_FILE="basic_ota_bt.conf;${ZEPHYR_OPENAIR_MODULE_DIR}/doc/dfu/overlay-serial-dfu.conf"
      - EXTRA_DTC_OVERLAY_FILE="${ZEPHYR_OPENAIR_MODULE_DIR}/applications/fp_tag/app_uart0.overlay"
      - SB_ATM_DTS_EXTRA_CPPFLAGS="-DDFU_IN_FLASH"
  applications.fp_tag.atm.mcuboot.flash_xip:
    tags: fp_tag atm34 mcuboot flash_xip
    extra_args:
      - SB_CONFIG_SPE=y
      - SB_CONFIG_BOOTLOADER_MCUBOOT=y
      - SB_CONFIG_BOOT_SIGNATURE_TYPE_ECDSA_P256=y
      - SB_CONFIG_ATMWSTK_PD50=y
      - SB_ATM_DTS_EXTRA_CPPFLAGS="-DRUN_IN_FLASH=2"
      - mcuboot_CONFIG_UPDATEABLE_IMAGE_NUMBER=2
    extra_configs:
      - CONFIG_ATM_SOC_ALLOW="ATM34"
  applications.fp_tag.atm.mcuboot.flash_xip.overwrite:
    tags: fp_tag atm34 mcuboot flash_xip overwrite
    extra_args:
      - SB_CONFIG_SPE=y
      - SB_CONFIG_BOOTLOADER_MCUBOOT=y
      - SB_CONFIG_BOOT_SIGNATURE_TYPE_ECDSA_P256=y
      - SB_CONFIG_MCUBOOT_MODE_OVERWRITE_ONLY=y
      - SB_CONFIG_ATMWSTK_PD50=y
      - SB_ATM_DTS_EXTRA_CPPFLAGS="-DATM_APP_FLASH_XIP;-DATM_MCUBOOT_SCRATCH_SIZE=0"
      - mcuboot_CONFIG_UPDATEABLE_IMAGE_NUMBER=2
      - mcuboot_CONFIG_MCUBOOT_VERIFY_IMG_ADDRESS=n
    extra_configs:
      - CONFIG_ATM_SOC_ALLOW="ATM34"
